<ion-view view-title="Chat">
    
      <ion-nav-buttons side="left">
             <a ui-sref="groups" class="button icon-left ion-chevron-left button-clear button-dark">Groups</a>
       </ion-nav-buttons>
  
  <ion-content>
    <ion-list>
      <ion-item class="item-remove-animate item-icon-right item-text-wrap" ng-repeat="message in messages | orderBy : message.timeDate : true">
        <div ng-switch on="message.anonymous">
          <div ng-switch-when="true">
            <h2>Anonymous Message:</h2> {{message.text}}
            <p class="timestamp">{{message.timeDate}}</p>
            <i class="report icon ion-flag icon-accessory"  ng-click="chatsctrl.report({{message.id}})"></i>
          </div>
          <div ng-switch-default>
            <h2>{{message.sender}}:</h2> {{message.text}}
            <p class="timestamp">{{message.timeDate}}</p>
            <i class="report icon ion-flag icon-accessory "  ng-click="chatsctrl.report({{message.id}})"></i>
          </div>
        </div>
      </ion-item>
    </ion-list>
  </ion-content>

 

  <ion-footer-bar class="bar-stable item-input-inset message-footer" keyboard-attach>
    <div class="footer-btn-wrap">
      <div ng-switch on="chatsctrl.anonymous">
        <div ng-switch-when="true">
            <button class="button button-light footer-btn" ng-click="chatsctrl.toggleAnonymous()"><i class="icon ion-ios-person-outline "></i></button>
        </div>
        <div ng-switch-when="false">
            <button class="button button-light footer-btn" ng-click="chatsctrl.toggleAnonymous()"><i class="icon ion-ios-person "></i></button>
        </div>

      </div>
    </div>
    <label class="item-input-wrapper">
        <textarea class="item-input-wrapper" ng-model="message.text" value="" placeholder="Send a message..." required minlength="1" maxlength="1500" msd-elastic></textarea>
    </label>
    <div class="footer-btn-wrap">
      <button class="button footer-btn button-small button-positive" ng-click="chatsctrl.send()">Send
      </button>
    </div>
  </ion-footer-bar>
 
</ion-view>
